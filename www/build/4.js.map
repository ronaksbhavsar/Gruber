{"version":3,"sources":["../../src/pages/profile/profile.module.ts","../../src/pages/profile/profile.ts"],"names":[],"mappings":"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","file":"4.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { IonicPageModule } from 'ionic-angular';\n\nimport { ProfilePage } from './profile';\n\n@NgModule({\n  declarations: [\n      ProfilePage,\n  ],\n  imports: [\n      IonicPageModule.forChild(ProfilePage),\n      TranslateModule.forChild()\n  ],\n  exports: [\n      ProfilePage\n  ]\n})\nexport class ProfilePageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/profile/profile.module.ts","import { Component } from '@angular/core';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { IonicPage, NavController, NavParams, LoadingController, AlertController } from 'ionic-angular';\r\nimport { Push, PushObject, PushOptions } from '@ionic-native/push';\r\n\r\nimport { DataService } from '../../providers/data-service/data-service';\r\nimport { Sync } from '../../providers/sync/sync';\r\nimport { LocationTracker } from '../../providers/location-tracker/location-tracker';\r\n\r\n/**\r\n * The Settings page is a simple form that syncs with a Settings provider\r\n * to enable the user to customize settings for the app.\r\n *\r\n */\r\n@IonicPage()\r\n@Component({\r\n    selector: 'page-profile',\r\n    templateUrl: 'profile.html'\r\n})\r\nexport class ProfilePage {\r\n    logoImage: string = 'assets/img/logo.png';\r\n    profilePic: string = 'assets/img/avatar/profile-pic.png';\r\n\r\n    user = {\r\n        u_name: '',\r\n        u_photo: 'assets/img/avatar/profile-pic.png'\r\n    };\r\n\r\n    tranlageMessage: any = [];\r\n    subSettings: any = ProfilePage;\r\n\r\n    constructor(public navCtrl: NavController,\r\n        public loadingCtrl: LoadingController,\r\n        //public settings: Settings,\r\n        public navParams: NavParams,\r\n        public translate: TranslateService,\r\n        public alertCtrl: AlertController,\r\n        public locationTracker: LocationTracker,\r\n        public sync: Sync,\r\n        public dataService: DataService,\r\n        private push: Push\r\n    ) { \n\n        this.translate.get([\n            \"SYNCING_LABEL\",\r\n            \"PROFILE_SHOW_ALERT_TITLE\",\r\n            \"PROFILE_SHOW_ALERT_SUBTITLE\",\r\n            \"LOADING_LABEL\",\r\n        ]).subscribe(\n            (values) => {\r\n                this.tranlageMessage['SYNCING_LABEL'] = values.SYNCING_LABEL;\r\n                this.tranlageMessage['PROFILE_SHOW_ALERT_TITLE'] = values.PROFILE_SHOW_ALERT_TITLE;\r\n                this.tranlageMessage['PROFILE_SHOW_ALERT_SUBTITLE'] = values.PROFILE_SHOW_ALERT_SUBTITLE;\r\n                this.tranlageMessage['LOADING_LABEL'] = values.LOADING_LABEL;\r\n            });\r\n\r\n        let isFirstTimeLogin = this.navParams.get('isFirstTimeLogin');\r\n        if (isFirstTimeLogin) {\r\n\r\n            let loader = this.loadingCtrl.create({\r\n                content: this.tranlageMessage['SYNCING_LABEL'],\r\n            });\r\n            loader.present();\r\n            this.sync.syncAllLocalTables().then(() => {\r\n                this.getUserDetail();\r\n\r\n                this.initPushNotification();\r\n\r\n                loader.dismiss();\r\n                this.locationTracker.startTracking();\r\n            });\r\n        }\r\n        else {\r\n            this.sync.syncAllLocalTables().then(() => {\r\n                this.locationTracker.startTracking();\r\n            });\r\n            this.getUserDetail();            \r\n        }\r\n    }\r\n\r\n    ionViewDidLoad() {\r\n        console.log('Hello Profile Page');\r\n    }\r\n    getUserDetail() {\r\n        this.dataService.getUser().then((response) => {\r\n            this.user = response;\r\n        });\r\n    }\r\n    goToOtherPage(pageName) {\r\n        this.navCtrl.push(pageName);\r\n    }\r\n\r\n    syncData() {\r\n        let loader = this.loadingCtrl.create({\r\n            content: this.tranlageMessage['SYNCING_LABEL'],\r\n        });\r\n        loader.present();\r\n\r\n        return this.sync.syncAllLocalTables().then(function () {\r\n            loader.dismiss();\r\n            return true;\r\n        });\r\n    }\r\n\r\n    checkPageHasCurrentActivity() {\r\n         \r\n        this.dataService.getCurrentActivityDetails().then((currentActivity) => {\r\n            if (currentActivity) {\r\n                this.goToOtherPage('CurrentActivityPage');\r\n            } else {\r\n                let alertMsg = this.alertCtrl.create({                    \r\n                    title: this.tranlageMessage['PROFILE_SHOW_ALERT_TITLE'],\r\n                    subTitle: this.tranlageMessage['PROFILE_SHOW_ALERT_SUBTITLE'],\r\n                    buttons: [{\r\n                        text: 'OK',\r\n                        role: 'cancel'\r\n                    }]\r\n                });\r\n                alertMsg.present();\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    saveDeviceToken(t) {\r\n        // Need to Save Registration Token in database..\r\n\r\n        //const messageData =\r\n        //    {\r\n        //        'ms_messageId': \"ae4a40c4-5482-4554-b10a-c18c946c7cd0\",\r\n        //        'ms_dtcreation': new Date(),\r\n        //        'ms_sender': \"a8b2040a-156f-40c3-9a1e-42cfc95681c5\",\r\n        //        'ms_message': t\r\n        //    };\r\n\r\n        ////alert(JSON.stringify(messageData));\r\n\r\n        //this.sync.insertTableRow('Mob_messagesTexts', messageData)\r\n        //    .then((result) => {\r\n        //    });\r\n    }\r\n\r\n    initPushNotification() {\r\n        // to check if we have permission\r\n        this.push.hasPermission()\r\n            .then((res: any) => {\r\n\r\n                if (res.isEnabled) {\r\n                    console.log('We have permission to send push notifications');\r\n                } else {\r\n                    console.log('We don\\'t have permission to send push notifications');\r\n                }\r\n\r\n            });\r\n\r\n        // to initialize push notifications\r\n\r\n        const options: PushOptions = {\r\n            android: {\r\n                senderID: '1092171990852'\r\n            },\r\n            ios: {\r\n                alert: 'true',\r\n                badge: true,\r\n                sound: 'false'\r\n            },\r\n            windows: {}\r\n        };\r\n\r\n        const pushObject: PushObject = this.push.init(options);\r\n\r\n        pushObject.on('notification').subscribe((notification: any) => {\r\n            console.log('Received a notification', notification);\r\n\r\n            //Notification Display Section\r\n            let confirmAlert = this.alertCtrl.create({\r\n                title: 'New Notification',\r\n                message: JSON.stringify(notification),\r\n                buttons: [{\r\n                    text: 'Ignore',\r\n                    role: 'cancel'\r\n                }, {\r\n                        text: 'View',\r\n                        handler: () => {\r\n                            //TODO: Your logic here\r\n                            //self.nav.push(DetailsPage, {message: data.message});\r\n                        }\r\n                    }]\r\n            });\r\n            confirmAlert.present();\r\n            //\r\n        });\r\n\r\n        pushObject.on('registration').subscribe((registration: any) => {\r\n            console.log('Device registered', registration);\r\n            this.saveDeviceToken(registration.registrationId);\r\n        });\r\n\r\n        pushObject.on('error').subscribe(error => console.error('Error with Push plugin', error));\r\n    }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/profile/profile.ts"],"sourceRoot":""}